#!/bin/bash
# create_file_lists.sh - Script to create file lists for each directory

# Define your base directories
DIRECTORIES=(
    "/eos/user/p/pravesh/run3/2023/MC/WGtoLNuG-1Jets_PTG-200to400_TuneCP5_13p6TeV_amcatnloFXFX-pythia8/WGtoLNuG-1Jets_PTG-200to400/250821_144203/0000/"
    "/eos/user/p/pravesh/run3/2023/MC/WGtoLNuG-1Jets_PTG-400to600_TuneCP5_13p6TeV_amcatnloFXFX-pythia8/WGtoLNuG-1Jets_PTG-400to600/250821_144550/0000/"
    "/eos/user/p/pravesh/run3/2023/MC/WGtoLNuG-1Jets_PTG-600_TuneCP5_13p6TeV_amcatnloFXFX-pythia8/WGtoLNuG-1Jets_PTG-600/250821_145432/0000/"
)

# Create output directory for file lists
mkdir -p filelists_WG

# Function to create file list for each directory
create_file_list() {
    local dir=$1
    local index=$2
    
    echo "Creating file list for directory $index: $dir"
    
    # Extract a meaningful name for the file list
    local dirname=$(basename $(dirname $(dirname $dir)))
    local subdir=$(basename $dir)
    local filename="filelists_ZG/filelist_${dirname}_${subdir}_job${index}.txt"
    
    # Find all ROOT files and write to file list
    find $dir -name "*.root" -type f > $filename
    
    # Count files
    local file_count=$(wc -l < $filename)
    echo "Found $file_count ROOT files in $dir"
    echo "File list saved as: $filename"
    
    echo $filename
}

# Create file lists for each directory
echo "Creating file lists for Condor jobs..."
job_index=0

for dir in "${DIRECTORIES[@]}"; do
    if [ -d "$dir" ]; then
        create_file_list "$dir" $job_index
        ((job_index++))
    else
        echo "Warning: Directory does not exist: $dir"
    fi
done

